create table ubicacions (
	id serial,
	pais varchar(32),
	region int,
	ciudad varchar(58),
	comuna varchar(21),
	primary key(id),
);

create table locals (
	id serial,
	id_ubicacion int,
	id_usuario int,
	valor_entrega money,
	direccion_local varchar(100),
	tiempo_despacho time,
	tiempo_retiro time,
	aprobado bool,
	cadena varchar(60),
	nombre varchar(60),
	primary key(id),
	foreign key (id_ubicacion)
	references ubicacions(id),
	foreign key (id_usuario)
	references usuarios(id)
);

create table mesas (
	id serial,
	id_local int,
	cantidad_puestos int,
	numero_mesa int,
	primary key(id),
	foreign key (id_local)
	references locals(id)
);

create table menus (
	id serial,
	id_local int,
	nombre text,
	precio money,
	descuento float,
	descripcion text,
	primary key(id),
	foreign key (id_local)
	references locals(id)
);

create table productos (
	id serial,
	nombre varchar(32),
	cantidad int,
	primary key(id),
);



create table horarios (
	id serial,
	id_local int,
	dia int,
	apertura time,
	cierre time,
	primary key(id),
	foreign key (id_local)
	references locals(id)
);

create table categorias (
	id serial,
	nombre varchar(32),
	primary key(id),
);


create table usuarios(
    id serial,
    id_ubicacion int,
    nombre varchar(60),
    apellido varchar(60),
    email varchar(30),
    contrasena char(32),
    calle varchar(80),
    rol int,
    primary key(id),
    foreign key(id_ubicacion)
    references ubicacions(id)
);

create table historial_usuarios(
    id serial,
    id_usuario int,
    accion text,
    fecha date,
    hora time,
    primary key(id),
    foreign key(id_usuario)
    references usuarios(id)
)


create table valoracions (
	id serial,
	id_local int,
	estrellas float,
	comentario text,
	primary key(id),
	foreign key (id_local)
	references local(id)
);

create table metodo_pagos (
	id serial,
	pago_entrega bool,
	pago_tarjeta bool,
	numero_tarjeta varchar(17),
	fecha_vencimiento date,
	digitos_verificadores varchar(4),
	primary key(id),
);

create table permisos (
	id serial,
	id_rol
	gestionar_local bool,
	gestionar_locales bool,
	gestionar_plataforma bool,
	gestionar_plataforma bool,
	primary key(id),
	foreign key (id_rol)
	references rol(id)
);

create table rols (
	id serial,
	tipo_rol varchar(40),
	primary key(id),
);


create table ingredientes (
	id serial,
	nombre_ingrediente(32),
	primary key(id),
);


